<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>일기 감정 분석</title>
</head>
<body>
    <textarea id="diary" placeholder="오늘 하루를 일기로 남겨보세요." rows="5" cols="40"></textarea>
    <button id="submitDiary">일기 제출</button>
    
    <p id="summary"></p>
    <p id="emotionMessage"></p>
    
    <script>
        document.getElementById("submitDiary").addEventListener("click", async () => {
            const diaryText = document.getElementById("diary").value;
            
            const response = await fetch('http://127.0.0.1:5000/process_diary', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ diary: diaryText })
            });
            
            if (response.ok) {
                const data = await response.json();
                document.getElementById("summary").innerText = `오늘 하루 요약: ${data.summary}`;
                
                // 감정에 따른 맞춤 메시지
                const emotionMessageEl = document.getElementById("emotionMessage");
                switch (data.emotion) {
                    case "joy":
                        emotionMessageEl.innerText = "오늘은 즐거워 보이시네요!";
                        break;
                    case "sadness":
                        emotionMessageEl.innerText = "오늘은 조금 힘드셨군요. 힘내세요!";
                        break;
                    default:
                        emotionMessageEl.innerText = "오늘 하루도 수고하셨어요!";
                }
            } else {
                document.getElementById("summary").innerText = "일기 처리 중 오류가 발생했습니다.";
                document.getElementById("emotionMessage").innerText = "";
            }
        });
    </script>
</body>
</html>
